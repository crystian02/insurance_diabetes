{% load static %}
<!doctype html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title>ML ‚Äì Seguros & Diabetes</title>
    <link rel="stylesheet" href="{% static 'ml/styles.css' %}">
    <style>
      .bg-diabetes {
        background-image: url("{% static 'ml/diabetes.webp' %}");
      }
      .bg-insurance {
        background-image: url("{% static 'ml/insurance.jpg' %}");
      }

      /* Loader inicial (app startup) */
      #loader {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: #111;
        color: white;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        z-index: 9999;
        transition: opacity 0.5s ease;
      }

      #loader.fade-out {
        opacity: 0;
        pointer-events: none;
      }

      /* Loader para predicciones */
      #loader-predict {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(17, 17, 17, 0.9);
        color: white;
        display: none;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        z-index: 10000;
        transition: opacity 0.5s ease;
      }

      #loader-predict.fade-out {
        opacity: 0;
        pointer-events: none;
      }

      .spinner {
        margin-top: 20px;
        width: 60px;
        height: 60px;
        border: 6px solid #555;
        border-top: 6px solid #00bfff;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
    </style>
  </head>
  <body>
    <!-- Loader principal al iniciar app -->
    <div id="loader">
      <h2 id="loader-text">‚è≥ Cargando la aplicaci√≥n... por favor espera</h2>
      <div class="spinner"></div>
    </div>

    <!-- Loader para predicciones -->
    <div id="loader-predict">
      <h2 id="loader-predict-text">üßÆ Calculando predicci√≥n...</h2>
      <div class="spinner"></div>
    </div>

    <div id="app-content" style="opacity: 0;">
      {% block content %}
      {% endblock %}
    </div>

    <script>
      // Loader inicial
      setTimeout(() => {
        document.getElementById('loader-text').textContent = 'ü§ñ Iniciando motores de predicci√≥n... üö¶';
      }, 3000);

      window.addEventListener('load', () => {
        const loader = document.getElementById('loader');
        const content = document.getElementById('app-content');
        loader.classList.add('fade-out');
        setTimeout(() => {
          loader.style.display = 'none';
          content.style.opacity = '1';
        }, 500);
      });

      // Loader de predicciones
      function showPredictLoader(msg = "üßÆ Calculando predicci√≥n...") {
        const loader = document.getElementById("loader-predict");
        const text = document.getElementById("loader-predict-text");
        text.textContent = msg;
        loader.style.display = "flex";
        loader.classList.remove("fade-out");
      }

      function hidePredictLoader() {
        const loader = document.getElementById("loader-predict");
        loader.classList.add("fade-out");
        setTimeout(() => loader.style.display = "none", 500);
      }
    </script>
  </body>
</html>